ALERT ReachingMemoryLimit
  IF ((container_memory_usage_bytes{name=~"prometheus.*"} * 100) / (container_spec_memory_limit_bytes{name=~"prometheus.*"})) >= 99
  FOR 5m
  LABELS {
    severity = "warning",
    team = "latam",
    job = "prometheus-server"
  }
  ANNOTATIONS {
    summary = "Reaching Memory Limit",
    description = "Using: {{ $value }}% of its assigned memory, if it exceeds, it'll be restarted by Nomad",
    runbook = "https://gitlab.full360.com/full360/runbook/tree/master/engage/au/qantas/loyalty/reaching_memory_limit.md",
    repo = "https://gitlab.full360.com/full360-south/instrumentation",
  }
